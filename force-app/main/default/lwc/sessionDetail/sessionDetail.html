<template>
    <template if:true={showLoading}>
        <lightning-spinner  variant="brand" alternative-text="Loading" size="medium" class="spinnerClass"></lightning-spinner>
    </template>
<!-- modal start -->      
    <template if:true={isShowModal} >
        <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open pendingSessionModal">
            <div class="slds-modal__container">
                <!-- modal header start -->
                <header class="slds-modal__header">
                    <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={hideModalBox}>
                        <lightning-icon icon-name="utility:close"
                        alternative-text="close"
                        variant="inverse"
                        size="x-small" class="closeIcon"></lightning-icon>
                        <span class="slds-assistive-text">Close</span>
                    </button>
                </header>
            
                <!-- modal body start -->
                <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-1" style="padding: 30px;">
                    <template if:true={showLoadingModal}>
                        <lightning-spinner  variant="brand" alternative-text="Loading" size="medium" class="spinnerClass"></lightning-spinner>
                    </template>
                    <template if:false={showLoadingModal}>
                        <template if:false={showPendingSession}>
                            <p style="color: #50A771;font-weight: bold;padding-bottom: 25px;">All session data entry complete!</p>
                        </template>
                        <template if:true={showPendingSession}>
                            <table class="pendingSessionTable">
                                <thead>
                                    <tr>
                                        <th>S.No.</th>
                                        <th>Session Data Pending For:</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <template for:each={sessionList} for:item="item" for:index="index">
                                    
                                        <tr key={item.school}>
                                            <td>{item.displayIndex}</td>
                                            <td>
                                                <strong>{item.school}</strong><br/>
                                                <template for:each={item.batches} for:item="batch">
                                                    <a  key={batch.batchDetails} href={batch.batchDetails} style="text-decoration:underline;" 
                                                    onclick={onClickPendingSession}>{batch.batchName} </br></a>
                                                    
                                                </template>
                                            </td>
                                        </tr>
                                    </template>
                            </tbody>
                            </table>
                        </template>
                    </template>
                </div>
            </div>
        </section>
        <div class="slds-backdrop slds-backdrop_open"></div>
    </template>
<!-- modal end -->
    <div class="sessionDetail">
        <div class="signOutDiv">
            <lightning-button variant="destructive" label="Sign Out" title="Sign Out" onclick={handleSignOut} 
            class="slds-m-left_x-small signOutButton"></lightning-button>
        </div>
        <div class="sessionFields">
            <div class="section">
                <!-- <lightning-record-picker
                    label="School Name"
                    placeholder="Type only first 4 letters and selects from option"
                    object-api-name="Account" filter={schoolFilter}  onchange={handleSchoolChange} value={schoolId} required
                >
                </lightning-record-picker> -->
                <template if:true={flagIndicatingDataHasBeenLoadedInVariables}>
                <c-Searchable-Combobox onselectoption={handleSelectOption} 
                                        options={options} 
                                        selected-value={schoolId} placeholder-data="Type only first 4 letters and selects from option"
                                        label="School Name"></c-Searchable-Combobox>
                </template>
            </div>
            <div class="section">
                <lightning-combobox
                name="grade"
                label="Grade"
                value={grade}
                placeholder="Select grade in school"
                options={gradeOption}
                onchange={onchangeGrade} required></lightning-combobox>
            </div>
            <div class="section">
                <lightning-combobox
                name="batch"
                label="Batch Code"
                value={batch}
                placeholder="Select batch code of class"
                options={batchOption}
                onchange={onchangeBatch} required></lightning-combobox>
            </div>
        </div>
        <div class="sessionFormInstruction">
            <c-session-form-instruction></c-session-form-instruction>
        </div>
        <div class="sessionAccordion">
            <lightning-accordion allow-multiple-sections-open
                         onsectiontoggle={handleSectionToggle}
                         active-section-name={activeSections}>
                <lightning-accordion-section name="flexibleSession" label="Flexible Sessions">
                    <p>This is the content area for section A.</p>
                    <p>Donec vitae tellus egestas, faucibus ipsum ac, imperdiet erat. Nam venenatis non ante at sagittis. Integer vel purus eget nunc semper placerat. Nam tristique quam leo, et posuere enim condimentum quis. Ut sagittis libero id lectus tempor maximus. Nunc ut tincidunt eros, a hendrerit leo. Suspendisse quis fermentum dolor. Nulla euismod consectetur leo, id condimentum nunc consequat quis.</p>
                </lightning-accordion-section>

                <lightning-accordion-section name="studentSession" label="Student Sessions">
                    <p>This is the content area for section B.</p>
                    <p>Nam at elit et justo scelerisque ullamcorper vel a felis. Mauris sit amet lorem sed est sagittis blandit nec ac turpis. Ut a mi id turpis pharetra ornare. Nullam rhoncus feugiat nunc, ac pulvinar felis pulvinar at. Nullam efficitur aliquet justo et ultricies. Maecenas eu felis aliquam, tincidunt elit at, suscipit leo. Duis ut urna nec nibh hendrerit lacinia. Sed non auctor libero. Sed pellentesque tempor mollis.</p>
                </lightning-accordion-section>

                <lightning-accordion-section name="parentSession" label="Parent Sessions">
                    <p>This is the content area for section C.</p>
                    <p>Nulla ornare ipsum felis, vel aliquet dui blandit vel. Integer accumsan velit quis mauris pharetra, nec sollicitudin dui eleifend. Cras condimentum odio mi, nec ullamcorper arcu ullamcorper sed. Proin massa arcu, rutrum a ullamcorper nec, hendrerit in sem. Etiam tempus eros ut lorem tincidunt, id condimentum nulla molestie. Morbi hendrerit elit pretium, ultrices neque non, ullamcorper justo. Quisque vel nisi eget eros efficitur semper. Nulla pulvinar venenatis quam vitae efficitur. Nam facilisis sollicitudin quam ac imperdiet.</p>
                </lightning-accordion-section>
                <template if:true={showParentSessionStatus}>
                    <lightning-button variant="brand" label="Complete" class="completeButton"></lightning-button>
                </template>

                <lightning-accordion-section name="individualCounsellingSession" label="Individual Counselling Sessions">
                    <p>This is the content area for section C.</p>
                    <p>Nulla ornare ipsum felis, vel aliquet dui blandit vel. Integer accumsan velit quis mauris pharetra, nec sollicitudin dui eleifend. Cras condimentum odio mi, nec ullamcorper arcu ullamcorper sed. Proin massa arcu, rutrum a ullamcorper nec, hendrerit in sem. Etiam tempus eros ut lorem tincidunt, id condimentum nulla molestie. Morbi hendrerit elit pretium, ultrices neque non, ullamcorper justo. Quisque vel nisi eget eros efficitur semper. Nulla pulvinar venenatis quam vitae efficitur. Nam facilisis sollicitudin quam ac imperdiet.</p>
                </lightning-accordion-section>
                <template if:true={showCounsellingSessionStatus}>
                    <lightning-button variant="brand" label="Incomplete" class="incompleteButton"></lightning-button>
                </template>
            </lightning-accordion>
            <div class="saveDiv">
                <lightning-button variant="brand" label="Save" title="Sign Out" onclick={handleSave} 
                class="slds-m-left_x-small saveButton"></lightning-button>
        </div>
        </div>
    </div>
</template>